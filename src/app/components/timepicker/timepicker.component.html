<div class="time-picker-wrapper" (click)="$event.stopPropagation()">
    <div *ngIf="!range" class="time-input" (click)="toggleTimePicker()">
        <input type="text" [value]="(control ? (control.value) : (timeForm.get('time')?.value) | date:'hh:mm a')"  readonly (blur)="onBlurEvent()" />
        <span class="clock-icon">ðŸ•’</span>
    </div>

    <div *ngIf="range" class="time-range-wrapper">
        <div class="time-input" (click)="toggleTimePickerStart()">
            <input type="text" [value]=" startTimeControl ? startTimeControl.value : timeForm.get('startTime')?.value | date:'hh:mm a'" readonly placeholder="Start Time" (blur)="onBlurEvent()" />
            <span class="clock-icon">ðŸ•’</span>
        </div>
        <div class="time-divider">-</div>
        <div class="time-input" (click)="toggleEndTimePickerEnd()">
            <input type="text" [value]="endTimeControl ? endTimeControl.value : timeForm.get('endTime')?.value | date:'hh:mm a'" readonly placeholder="End Time" (blur)="onBlurEvent()" />
            <span class="clock-icon">ðŸ•’</span>
        </div>
    </div>

    <div *ngIf="isEndOpen || isStartOpen || isOpen" class="time-picker-container" #timePickerContainer [class.open]="isEndOpen || isStartOpen || isOpen">
        <ul class="time-options">
            <li *ngFor="let option of amTimeOptions" 
                [class.selected]="getSelectedTime(option)"
                (click)="onTimeSelected(option, isEndOpen)">
                {{ option }}
                <span *ngIf="getSelectedTime(option)" class="tick-mark">âœ”</span>
            </li>
            <li *ngFor="let option of pmTimeOptions" 
                [class.selected]="getSelectedTime(option)"
                (click)="onTimeSelected(option, isEndOpen)">
                {{ option }}
                <span *ngIf="getSelectedTime(option)" class="tick-mark">âœ”</span>
            </li>
        </ul>
    </div>

    <div *ngIf="range" class="time-actions">
        <button type="button" (click)="applyTimeRange()" class="apply-btn">Apply</button>
    </div>
</div>